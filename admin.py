from flask import render_template, Blueprint, session, jsonify
from auth import login_required, admin_required

admin = Blueprint('admin', __name__, url_prefix='/admin')

#### ADMINISTRATION ####

@admin.route('/')
@login_required
@admin_required
def index():
    return 'Hello {}'.format(session.get('user', None))

@admin.route('/session')
@login_required
@admin_required
def session():
    res = {}
    for x in session:
        res[x] = session[x]
    return jsonify(res)

@admin.route('/connected')
@login_required
@admin_required
def connected():
    return jsonify(session['connected_user'])
