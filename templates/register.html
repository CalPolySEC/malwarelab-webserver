{% extends "base.html" %}

{% block title %} Register {% endblock %}

{% block style %}
<style type="text/css">
</style>
{% endblock %}

{% block authcontent %}
    <p>Already have an account? <a href="{{ url_for('login') }}">Login here</a>!</p>
    <div class="register">
        <form method="post" action="{{ url_for('auth.new_user') }}">
            <div>
                <label for="name">Name:</label>
                <input type="text" id="user_name" name="user_name" required>
            </div>
            <div>
                <label for="username">Username:</label>
                <input type="text" id="user_username" name="user_username" required>
            </div>

            <div>
                <label for="email">Email:</label>
                <input type="email" id="user_email" name="user_email" required>
            </div>
            <div>
                <label for="password">Password:</label>
                <input type="password" id="user_password" name="user_password" required>
            </div>

            <button id="register-button" type="submit" style="color: red">
                Register
            </button>
        </form>
    </div>

    <!-- Sign In with Apple -->
    <div id="sign-in-with-apple">
        <button disabled id="sign-in-with-apple-button"> Sign In with Apple </button>
        Coming soon...
        
        <script type="text/javascript" src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"></script>
        <script type="text/javascript">
            AppleID.auth.init({
                clientId : '{{ client_id }}',
                scope : '{{ scopes }}',
                redirectURI: "[{{ url_for('auth.redirect_uri') }}]",
                state : '{{ state }}'
            });

            const buttonElement = document.getElementById('sign-in-with-apple-button');
            buttonElement.addEventListener('click', () => {
                AppleID.auth.signIn();
            });
        </script>
    </div>
{% endblock %}
